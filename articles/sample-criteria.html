<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>sample-criteria ‚Ä¢ sample.criteria</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="sample-criteria">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sample.criteria</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9624</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/sample-criteria.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jingwen517/sample-criteria.git/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>sample-criteria</h1>
                        <h4 data-toc-skip class="author">Sun
JingWen</h4>
            
            <h4 data-toc-skip class="date">2024-09-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jingwen517/sample-criteria.git/blob/master/vignettes/sample-criteria.Rmd" class="external-link"><code>vignettes/sample-criteria.Rmd</code></a></small>
      <div class="d-none name"><code>sample-criteria.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Clinical prediction models (CPMs) are often developed using logistic
regression to predict binary health outcomes. However, they can also be
developed using multinomial logistic regression for outcomes with
multiple levels, such as cancer grade or Likert scales. Multinomial
models have been effective in various clinical settings, and some argue
that they should be used more often. It‚Äôs important to ensure the sample
size of the development dataset is adequate to minimize overfitting and
provide precise predictions. <span class="citation">Pate et al.
(2023)</span> proposes to extend the existing sample criteria defined by
<span class="citation">Riley et al. (2020)</span>.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><span class="citation">Ensor (2018)</span> wrote a package for
calculating the sample criteria based on the implementation in Stata.
The package <code>sample.criteria</code> basically extends the current
framework of binary logistic regression models into multinomial ones for
determining the minimum sample size required when developing a
prediction model. However,calculating these different criteria are
dependent on the information reported by the model.</p>
<ul>
<li>
<span class="citation">Riley et al. (2019)</span> uses event
outcomes;</li>
<li>
<span class="citation">Riley, Van Calster, and Collins (2021)</span>
uses a prevalance and a C-statistics;</li>
<li>
<span class="citation">Pate et al. (2023)</span> uses prevalances
and pairwise C-statistics.</li>
</ul>
<p>In this vignette, we‚Äôll explore how <code>pmsampsize()</code>
function deals the situation properly.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the <code>sample.criteria</code> package from Github
using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remotes::install_github("jingwen517/sample-criteria")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jingwen517/sample-criteria.git" class="external-link">sample.criteria</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="case-study-tumor-type-prediction">Case Study: Tumor Type Prediction<a class="anchor" aria-label="anchor" href="#case-study-tumor-type-prediction"></a>
</h3>
<p>This package has two main functions: <strong>pmsamplesize()</strong>
and <strong>approximate_R2()</strong>. We will mainly focus on the
example in <span class="citation">Pate et al. (2023, 564)</span>.</p>
<p>The very least information a user needs to provide is event outcomes
or prevalance to further calculate the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS,adj,k,r}</annotation></semantics></math>
required by sample criteron 1 and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ùöñùöäùö°</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>p</mi><mi>p</mi></mrow><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\texttt{max}(R^2_{CS,app})</annotation></semantics></math>
required by criterion 2. <strong>Note</strong> that criterion 1 is
sensitive to this and tends to return a higher predicted sample size if
a rounded prevalance is given to the <code>p</code> argument in
<code><a href="../reference/pmsamplesize.html">pmsamplesize()</a></code> function compared to just event outcomes.
The following is a flowchart of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS,adj,k,r}</annotation></semantics></math>
derivation:</p>
<p><img src="https://raw.githubusercontent.com/chuckleong21/sample-criteria/main/vignettes/r2_derivation.png" alt="R2 derivation"></p>
<div class="section level4">
<h4 id="case-1-only-c-statistics-is-reported">Case 1: Only C statistics is reported<a class="anchor" aria-label="anchor" href="#case-1-only-c-statistics-is-reported"></a>
</h4>
<p>In clinical studies, Cox-Snell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
often has the following issues:</p>
<ul>
<li>The Cox-Snell R-squared is often criticized for its lack of
interpretability and its sensitivity to censoring (when some event times
are unknown due to follow-up truncation).</li>
<li>It does not consider the actual distribution of survival times or
the shape of the hazard function.</li>
<li>Additionally, it assumes that the proportional hazards assumption
holds, which may not always be the case.</li>
</ul>
<p>We can then appropriate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS}</annotation></semantics></math>
using the C statistics and event prevalence (outcome proportion). The
steps are detailed in <a href="https://github.com/alexpate30/MRC-multi-outcome/blob/394a236a83df524074197d9dc194fdafe96aad9c/Project%208%20Multinomial%20Sample%20Size/code/p3.1%20worked%20example.R#L142" class="external-link">Github</a>.
We can execute the simulation with the following command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span><span class="va">approximate_R2</span>, </span>
<span>       k <span class="op">=</span> <span class="fl">5</span>, </span>
<span>       auc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.92</span>, <span class="fl">0.99</span>, <span class="fl">0.95</span>, <span class="fl">0.75</span>, <span class="fl">0.95</span>, <span class="fl">0.87</span>, <span class="fl">0.87</span>, <span class="fl">0.71</span>, <span class="fl">0.82</span><span class="op">)</span>, </span>
<span>       prev <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.729</span>, <span class="fl">0.053</span>, <span class="fl">0.05</span>, <span class="fl">0.133</span>, <span class="fl">0.034</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 0.29439854 0.15435216 0.26227726 0.35219081 0.02858901 0.49086766</span></span>
<span><span class="co">#&gt;  [7] 0.10912363 0.10410317 0.06626235 0.05093480</span></span></code></pre></div>
<p>Here, the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS}</annotation></semantics></math>
can be directly used for calculating sample criteria since it is gotten
from another dataset. <code>adjust = TRUE</code> argument in
<code>pmsamplesize</code> allows a user to use
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>d</mi><mi>j</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS,adj}</annotation></semantics></math>
adjusted to amount of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>N</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>l</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>k</mi><mi>e</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Nagelkerke}</annotation></semantics></math>.
Assuming the new model aimed to consider up to 17 predictor parameters,
applying the sample size criteria of Riley et al.¬†Using pmsamplesize()
then we should have a minimum sample size of 13135:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span>
<span><span class="va">scriteria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pmsamplesize.html">pmsamplesize</a></span><span class="op">(</span>Q <span class="op">=</span> <span class="fl">17</span>, </span>
<span>                          k <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                          p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.729</span>, <span class="fl">0.053</span>, <span class="fl">0.05</span>, <span class="fl">0.133</span>, <span class="fl">0.034</span><span class="op">)</span>,</span>
<span>                          auc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.92</span>, <span class="fl">0.99</span>, <span class="fl">0.95</span>, <span class="fl">0.75</span>, <span class="fl">0.95</span>, <span class="fl">0.87</span>, <span class="fl">0.87</span>, <span class="fl">0.71</span>, <span class="fl">0.82</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">scriteria</span> </span>
<span><span class="co">#&gt; NB: Assuming 0.05 acceptable difference in apparent &amp; adjusted R-squared</span></span>
<span><span class="co">#&gt; NB: Assuming 0.05 margin of error in estimation of intercept</span></span>
<span><span class="co">#&gt;            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq</span></span>
<span><span class="co">#&gt; Criteria 1       13135      0.90        17 0.1261382 0.8409213    0.15</span></span>
<span><span class="co">#&gt; Criteria 2        1478      0.75        17 0.1261382 0.8409213    0.15</span></span>
<span><span class="co">#&gt; Criteria 3         525      0.90        17 0.1261382 0.8409213    0.15</span></span>
<span><span class="co">#&gt; Final            13135      0.90        17 0.1261382 0.8409213    0.15</span></span></code></pre></div>
<p>Three criteria are reported in this example. The criterion targeting
the difference between the apparent and optimism adjusted
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>N</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>l</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>k</mi><mi>e</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Nagelkerke}</annotation></semantics></math>
to be
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Œ¥</mi><mrow></mrow><mo>=</mo><mn>0.05</mn></mrow><annotation encoding="application/x-tex">\delta{}=0.05</annotation></semantics></math>
has a larger example for modeling in the future.</p>
</div>
<div class="section level4">
<h4 id="case-2-when-neither-cox-snell-r2-or-c-statistics-are-reported">Case 2: When Neither Cox-Snell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
or C-statistics are reported<a class="anchor" aria-label="anchor" href="#case-2-when-neither-cox-snell-r2-or-c-statistics-are-reported"></a>
</h4>
<p><span class="citation">Pate et al. (2023, 563)</span> recommends
derive
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS,adj,k,r}</annotation></semantics></math>
by the approach suggested by <span class="citation">Riley et al.
(2020)</span>. (Referred as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub><annotation encoding="application/x-tex">\varphi_{k,r}</annotation></semantics></math>
approach in figure above) In the literature,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>E</mi><mi>k</mi></msub><mrow><msub><mi>E</mi><mi>k</mi></msub><mo>+</mo><msub><mi>E</mi><mi>r</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\varphi_{k,r}=\frac{E_k}{E_k+E_r}</annotation></semantics></math>
is defined as outcome proportion in the category k relative to the
reference category r. Then for each distinct logistic regression model
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ùöñùöäùö°</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>p</mi><mi>p</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\texttt{max}(R^2_{CS,app,k,r})</annotation></semantics></math>
can be calculated as:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ùöñùöäùö°</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>p</mi><mi>p</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>1</mn><mo>‚àí</mo><msubsup><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mrow><mo stretchy="false" form="prefix">(</mo><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub></mrow></msubsup><msup><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>‚àí</mo><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mn>1</mn><mo>‚àí</mo><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub></mrow></msup><msup><mo stretchy="false" form="postfix">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\texttt{max}(R^2_{CS,app,k,r})=1-\varphi_{k,r}^{(\varphi_{k,r}}(1-\varphi_{k,r})^{1-\varphi_{k,r}})^2</annotation></semantics></math>
If a multinomial model had been published, then this information would
be available for each distinct logistic regression model assuming the
number of events in each category had been reported.
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mo>,</mo><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS,adj,k,r}</annotation></semantics></math>
calculated in this approach tends to be smaller and it results to larger
sample size. To remedy this issue, the recommendations are put forward
in <span class="citation">Pate et al. (2023, 564)</span>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bcriteria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pmsamplesize.html">pmsamplesize</a></span><span class="op">(</span>Q <span class="op">=</span> <span class="fl">17</span>,</span>
<span>                  k <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2557</span>, <span class="fl">186</span>, <span class="fl">176</span>, <span class="fl">467</span>, <span class="fl">120</span><span class="op">)</span>,</span>
<span>                  r2_nagelkerke <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>                  shrinkage <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span><span class="va">bcriteria</span></span>
<span><span class="co">#&gt; NB: Assuming 0.05 acceptable difference in apparent &amp; adjusted R-squared</span></span>
<span><span class="co">#&gt; NB: Assuming 0.05 margin of error in estimation of intercept</span></span>
<span><span class="co">#&gt;            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq</span></span>
<span><span class="co">#&gt; Criteria 1       15280      0.90        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Criteria 2        1477      0.75        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Criteria 3         524      0.90        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Final            15280      0.90        17 0.1261869 0.8412462    0.15</span></span></code></pre></div>
<p>By default, the first element in the vector is the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">Y=0</annotation></semantics></math>
group (benign) group. <code>p</code> argument will be properly handled
by the function, be it proportion outcomes or event outcomes.</p>
</div>
<div class="section level4">
<h4 id="case-3-cohort-cox-snell-r2_cs_adjkr-approximation-with-c-statistics">Case 3: Cohort Cox-Snell
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mi>_</mi><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS\_adj,k,r}</annotation></semantics></math>
approximation with C statistics<a class="anchor" aria-label="anchor" href="#case-3-cohort-cox-snell-r2_cs_adjkr-approximation-with-c-statistics"></a>
</h4>
<p>To calculate the criterion 1 minimum sample size, we need the cohort
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>C</mi><mi>S</mi><mi>_</mi><mi>a</mi><mi>d</mi><mi>j</mi><mo>,</mo><mi>k</mi><mo>,</mo><mi>r</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{CS\_adj,k,r}</annotation></semantics></math>
information, which sometimes are not reported in studies. We can the
approximate them using the simulation approach put forward by Riley et
al.¬†Estimates of the pairwise outcome proportions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>œÜ</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub><annotation encoding="application/x-tex">\varphi_{k,r}</annotation></semantics></math>
of category k relative to the reference category r are also required to
implement the simulation approach. One can supply the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>œï</mi><mrow><mi>k</mi><mo>,</mo><mi>r</mi></mrow></msub><annotation encoding="application/x-tex">\phi_{k,r}</annotation></semantics></math>
value to argument , but it could also be left blank and the calculation
will be done internally with argument <code>p</code>. The example in
<span class="citation">Pate et al. (2023, 565)</span> could be executed
with the following demand:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span>
<span><span class="va">acriteria</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pmsamplesize.html">pmsamplesize</a></span><span class="op">(</span>Q <span class="op">=</span> <span class="fl">17</span>,</span>
<span>                  k <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2557</span>, <span class="fl">186</span>, <span class="fl">176</span>, <span class="fl">467</span>, <span class="fl">120</span><span class="op">)</span>,</span>
<span>                  r2_nagelkerke <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>                  shrinkage <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                  auc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.92</span>, <span class="fl">0.99</span>, <span class="fl">0.95</span>, <span class="fl">0.75</span>, <span class="fl">0.95</span>, <span class="fl">0.87</span>, <span class="fl">0.87</span>, <span class="fl">0.71</span>, <span class="fl">0.82</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">acriteria</span></span>
<span><span class="co">#&gt; NB: Assuming 0.05 acceptable difference in apparent &amp; adjusted R-squared</span></span>
<span><span class="co">#&gt; NB: Assuming 0.05 margin of error in estimation of intercept</span></span>
<span><span class="co">#&gt;            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq</span></span>
<span><span class="co">#&gt; Criteria 1       13063      0.90        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Criteria 2        1477      0.75        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Criteria 3         524      0.90        17 0.1261869 0.8412462    0.15</span></span>
<span><span class="co">#&gt; Final            13063      0.90        17 0.1261869 0.8412462    0.15</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Through the illustrations above, package can easily calculate
pre-defined sample criteria for future modelling given what kind of
information is reported in various studies.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Ensor2018" class="csl-entry">
Ensor, Joie. 2018. <span>‚Äú<span class="nocase">PMSAMPSIZE: Stata module
to calculate the minimum sample size required for developing a
multivariable prediction model</span>.‚Äù</span> Statistical Software
Components, Boston College Department of Economics. <a href="https://ideas.repec.org/c/boc/bocode/s458569.html" class="external-link">https://ideas.repec.org/c/boc/bocode/s458569.html</a>.
</div>
<div id="ref-Pate2023-yh" class="csl-entry">
Pate, Alexander, Richard D Riley, Gary S Collins, Maarten van Smeden,
Ben Van Calster, Joie Ensor, and Glen P Martin. 2023. <span>‚ÄúMinimum
Sample Size for Developing a Multivariable Prediction Model Using
Multinomial Logistic Regression.‚Äù</span> <em>Stat. Methods Med.
Res.</em> 32 (3): 555‚Äì71.
</div>
<div id="ref-Rileym441" class="csl-entry">
Riley, Richard D, Joie Ensor, Kym I E Snell, Frank E Harrell, Glen P
Martin, Johannes B Reitsma, Karel G M Moons, Gary Collins, and Maarten
van Smeden. 2020. <span>‚ÄúCalculating the Sample Size Required for
Developing a Clinical Prediction Model.‚Äù</span> <em>BMJ</em> 368. <a href="https://doi.org/10.1136/bmj.m441" class="external-link">https://doi.org/10.1136/bmj.m441</a>.
</div>
<div id="ref-Riley2019-rn" class="csl-entry">
Riley, Richard D, Kym Ie Snell, Joie Ensor, Danielle L Burke, Frank E
Harrell Jr, Karel Gm Moons, and Gary S Collins. 2019. <span>‚ÄúMinimum
Sample Size for Developing a Multivariable Prediction Model:
<span>PART</span> <span>II</span> - Binary and Time-to-Event
Outcomes.‚Äù</span> <em>Stat. Med.</em> 38 (7): 1276‚Äì96.
</div>
<div id="ref-Riley2021-qe" class="csl-entry">
Riley, Richard D, Ben Van Calster, and Gary S Collins. 2021. <span>‚ÄúA
Note on Estimating the <span>Cox-Snell</span> <span>R2</span> from a
Reported <span>C</span> Statistic (<span>AUROC</span>) to Inform Sample
Size Calculations for Developing a Prediction Model with a Binary
Outcome.‚Äù</span> <em>Stat. Med.</em> 40 (4): 859‚Äì64.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jingwen Sun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
