[{"path":"https://chuckleong21.github.io/sample-criteria/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 sample.criteria authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"sample-criteria","text":"Clinical prediction models (CPMs) often developed using logistic regression predict binary health outcomes. However, can also developed using multinomial logistic regression outcomes multiple levels, cancer grade Likert scales. Multinomial models effective various clinical settings, argue used often. ’s important ensure sample size development dataset adequate minimize overfitting provide precise predictions. Pate et al. (2023) proposes extend existing sample criteria defined Riley et al. (2020).","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"sample-criteria","text":"Ensor (2018) wrote package calculating sample criteria based implementation Stata. package sample.criteria basically extends current framework binary logistic regression models multinomial ones determining minimum sample size required developing prediction model. However,calculating different criteria dependent information reported model. Riley et al. (2019) uses event outcomes; Riley, Van Calster, Collins (2021) uses prevalance C-statistics; Pate et al. (2023) uses prevalances pairwise C-statistics. vignette, ’ll explore pmsampsize() function deals situation properly.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"installation","dir":"Articles","previous_headings":"Introduction","what":"Installation","title":"sample-criteria","text":"can install sample.criteria package Github using following command:","code":"# remotes::install_github(\"jingwen517/sample-criteria\") library(sample.criteria)"},{"path":[]},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"case-study-tumor-type-prediction","dir":"Articles","previous_headings":"Usage","what":"Case Study: Tumor Type Prediction","title":"sample-criteria","text":"package two main functions: pmsamplesize() approximate_R2(). mainly focus example Pate et al. (2023, 564). least information user needs provide event outcomes prevalance calculate RCS,adj,k,r2R^2_{CS,adj,k,r} required sample criteron 1 𝚖𝚊𝚡(RCS,app2)\\texttt{max}(R^2_{CS,app}) required criterion 2. Note criterion 1 sensitive tends return higher predicted sample size rounded prevalance given p argument pmsamplesize() function compared just event outcomes. following flowchart RCS,adj,k,r2R^2_{CS,adj,k,r} derivation:","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"case-1-only-c-statistics-is-reported","dir":"Articles","previous_headings":"Usage > Case Study: Tumor Type Prediction","what":"Case 1: Only C statistics is reported","title":"sample-criteria","text":"clinical studies, Cox-Snell R2R^2 often following issues: Cox-Snell R-squared often criticized lack interpretability sensitivity censoring (event times unknown due follow-truncation). consider actual distribution survival times shape hazard function. Additionally, assumes proportional hazards assumption holds, may always case. can appropriate RCS2R^2_{CS} using C statistics event prevalence (outcome proportion). steps detailed Github. can execute simulation following command: , RCS2R^2_{CS} can directly used calculating sample criteria since gotten another dataset. adjust = TRUE argument pmsamplesize allows user use RCS,adj2R^2_{CS,adj} adjusted amount RNagelkerke2R^2_{Nagelkerke}. Assuming new model aimed consider 17 predictor parameters, applying sample size criteria Riley et al. Using pmsamplesize() minimum sample size 13135: Three criteria reported example. criterion targeting difference apparent optimism adjusted RNagelkerke2R^2_{Nagelkerke} δ=0.05\\delta{}=0.05 larger example modeling future.","code":"set.seed(101) mapply(approximate_R2,         k = 5,         auc = c(0.85, 0.92, 0.99, 0.95, 0.75, 0.95, 0.87, 0.87, 0.71, 0.82),         prev = c(0.729, 0.053, 0.05, 0.133, 0.034)) #>  [1] 0.29439854 0.15435216 0.26227726 0.35219081 0.02858901 0.49086766 #>  [7] 0.10912363 0.10410317 0.06626235 0.05093480 set.seed(101) scriteria <- pmsamplesize(Q = 17,                            k = 5,                            p = c(0.729, 0.053, 0.05, 0.133, 0.034),                           auc = c(0.85, 0.92, 0.99, 0.95, 0.75, 0.95, 0.87, 0.87, 0.71, 0.82)) scriteria  #> NB: Assuming 0.05 acceptable difference in apparent & adjusted R-squared #> NB: Assuming 0.05 margin of error in estimation of intercept #>            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq #> Criteria 1       13135      0.90        17 0.1261382 0.8409213    0.15 #> Criteria 2        1478      0.75        17 0.1261382 0.8409213    0.15 #> Criteria 3         525      0.90        17 0.1261382 0.8409213    0.15 #> Final            13135      0.90        17 0.1261382 0.8409213    0.15"},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"case-2-when-neither-cox-snell-r2-or-c-statistics-are-reported","dir":"Articles","previous_headings":"Usage > Case Study: Tumor Type Prediction","what":"Case 2: When Neither Cox-Snell R2R^2 or C-statistics are reported","title":"sample-criteria","text":"Pate et al. (2023, 563) recommends derive RCS,adj,k,r2R^2_{CS,adj,k,r} approach suggested Riley et al. (2020). (Referred φk,r\\varphi_{k,r} approach figure ) literature, φk,r=EkEk+Er\\varphi_{k,r}=\\frac{E_k}{E_k+E_r} defined outcome proportion category k relative reference category r. distinct logistic regression model 𝚖𝚊𝚡(RCS,app,k,r2)\\texttt{max}(R^2_{CS,app,k,r}) can calculated : 𝚖𝚊𝚡(RCS,app,k,r2)=1−φk,r(φk,r(1−φk,r)1−φk,r)2\\texttt{max}(R^2_{CS,app,k,r})=1-\\varphi_{k,r}^{(\\varphi_{k,r}}(1-\\varphi_{k,r})^{1-\\varphi_{k,r}})^2 multinomial model published, information available distinct logistic regression model assuming number events category reported. RCS,adj,k,r2R^2_{CS,adj,k,r} calculated approach tends smaller results larger sample size. remedy issue, recommendations put forward Pate et al. (2023, 564). default, first element vector Y=0Y=0 group (benign) group. p argument properly handled function, proportion outcomes event outcomes.","code":"bcriteria <- pmsamplesize(Q = 17,                   k = 5,                   p = c(2557, 186, 176, 467, 120),                   r2_nagelkerke = 0.15,                   shrinkage = 0.9) bcriteria #> NB: Assuming 0.05 acceptable difference in apparent & adjusted R-squared #> NB: Assuming 0.05 margin of error in estimation of intercept #>            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq #> Criteria 1       15280      0.90        17 0.1261869 0.8412462    0.15 #> Criteria 2        1477      0.75        17 0.1261869 0.8412462    0.15 #> Criteria 3         524      0.90        17 0.1261869 0.8412462    0.15 #> Final            15280      0.90        17 0.1261869 0.8412462    0.15"},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"case-3-cohort-cox-snell-r2_cs_adjkr-approximation-with-c-statistics","dir":"Articles","previous_headings":"Usage > Case Study: Tumor Type Prediction","what":"Case 3: Cohort Cox-Snell RCS_adj,k,r2R^2_{CS\\_adj,k,r} approximation with C statistics","title":"sample-criteria","text":"calculate criterion 1 minimum sample size, need cohort RCS_adj,k,r2R^2_{CS\\_adj,k,r} information, sometimes reported studies. can approximate using simulation approach put forward Riley et al. Estimates pairwise outcome proportions φk,r\\varphi_{k,r} category k relative reference category r also required implement simulation approach. One can supply ϕk,r\\phi_{k,r} value argument , also left blank calculation done internally argument p. example Pate et al. (2023, 565) executed following demand:","code":"set.seed(101) acriteria <- pmsamplesize(Q = 17,                   k = 5,                   p = c(2557, 186, 176, 467, 120),                   r2_nagelkerke = 0.15,                   shrinkage = 0.9,                   auc = c(0.85, 0.92, 0.99, 0.95, 0.75, 0.95, 0.87, 0.87, 0.71, 0.82)) acriteria #> NB: Assuming 0.05 acceptable difference in apparent & adjusted R-squared #> NB: Assuming 0.05 margin of error in estimation of intercept #>            sample_size shrinkage parameter    CS_Rsq   Max_Rsq Nag_Rsq #> Criteria 1       13063      0.90        17 0.1261869 0.8412462    0.15 #> Criteria 2        1477      0.75        17 0.1261869 0.8412462    0.15 #> Criteria 3         524      0.90        17 0.1261869 0.8412462    0.15 #> Final            13063      0.90        17 0.1261869 0.8412462    0.15"},{"path":"https://chuckleong21.github.io/sample-criteria/articles/sample-criteria.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"sample-criteria","text":"illustrations , package can easily calculate pre-defined sample criteria future modelling given kind information reported various studies.","code":""},{"path":[]},{"path":"https://chuckleong21.github.io/sample-criteria/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jingwen Sun. Author, maintainer.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Pate (2023). “Minimum sample size developing multivariable prediction model using multinomial logistic regression.” Statistical Methods Medical Research, 32(3), 555-571. doi:10.1177/09622802231151220.","code":"@Article{Pate2023-yh,   title = {Minimum sample size for developing a multivariable prediction model using multinomial logistic regression},   author = {Alexander Pate},   journal = {Statistical Methods in Medical Research},   year = {2023},   volume = {32},   number = {3},   pages = {555-571},   doi = {10.1177/09622802231151220}, }"},{"path":"https://chuckleong21.github.io/sample-criteria/index.html","id":"samplecriteria","dir":"","previous_headings":"","what":"Criteria-based minimum sample size for multinomial logistic models","title":"Criteria-based minimum sample size for multinomial logistic models","text":"goal sample.criteria calculate minimum sample size based reported clinic prediction models future work.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/index.html","id":"installaion","dir":"","previous_headings":"","what":"Installaion","title":"Criteria-based minimum sample size for multinomial logistic models","text":"package CRAN, install github:","code":"remotes::install_github(\"jingwen517/sample-criteria\")"},{"path":"https://chuckleong21.github.io/sample-criteria/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Criteria-based minimum sample size for multinomial logistic models","text":"calculate minimum sample multinomial logistic regression model: learn usage cases, see vignette(\"sample-criteria\").","code":"library(sample.criteria)  set.seed(101) acriteria <- pmsamplesize(Q = 17,                   k = 5,                   p = c(2557, 186, 176, 467, 120),                   r2_nagelkerke = 0.15,                   shrinkage = 0.9,                   auc = c(0.85, 0.92, 0.99, 0.95, 0.75, 0.95, 0.87, 0.87, 0.71, 0.82))"},{"path":"https://chuckleong21.github.io/sample-criteria/reference/approximate_R2.html","id":null,"dir":"Reference","previous_headings":"","what":"R-sqaure approximation — approximate_R2","title":"R-sqaure approximation — approximate_R2","text":"\\(R^2\\) approximation based Riley's approach \\(R^2_{CS}\\) reported.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/approximate_R2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R-sqaure approximation — approximate_R2","text":"","code":"approximate_R2(k, auc, prev, n = 1e+06)"},{"path":"https://chuckleong21.github.io/sample-criteria/reference/approximate_R2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R-sqaure approximation — approximate_R2","text":"k scalar integer. number outcomes, \\(k\\geq{2}\\) auc double. Reported pairwise C-statistics prev double. outcome  reporting existing prediction model n integer. Simulation sample size. Default 1e6","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/approximate_R2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"R-sqaure approximation — approximate_R2","text":"binary outcome, approximate_R2() bases  using rms package. returns list containing \\(R^2_{CS}\\) \\(R^2_{Nagelkerke}\\) multinomial models, Bernoulli simulation used, based ","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/approximate_R2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R-sqaure approximation — approximate_R2","text":"","code":"sim <- approximate_R2(k = 2, auc = 0.81, prev = 0.77) sim[[\"R2.coxsnell\"]] # coxsnell R2 #> [1] 0.2132698 sim[[\"R2.nagelkerke\"]] # nagerlkerke R2 #> [1] 0.3231788"},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"Calculate sample criteria extended multinominal regression.","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"","code":"pmsamplesize(   Q,   k,   p,   adjust = FALSE,   r2_cs_app = NULL,   r2_cs_adj = NULL,   shrinkage = 0.9,   r2_nagelkerke = 0.15,   auc = NULL,   prev = NULL,   sigma = 0.05,   margin_error = 0.05 )"},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"Q integer. number candidate predictors. See Details k integer. number levels response variable p numeric vector. Outcome proportion(s) event observations adjust logical. adjusted R-square value used? Default FALSE r2_cs_app numeric vector. apparent Cox-Snell \\(R^2\\) r2_cs_adj numeric vector. optimism-adjusted Cox-Snell \\(R^2\\) shrinkage pre-defined shrinkage factor. Default 0.9 r2_nagelkerke adjustment Cox-Snell \\(R^2\\). Default 0.15. auc numeric vector. Pairwise C statistics prev numeric vector. Outcome proportions categories relative reference sigma double. Tolerate rate adjusted \\(R^2\\) apparent \\(R^2\\). Default 0.05 margin_error double. divergence margin error specified Chi-square distribution's confidence level. Default 0.05","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"pmsample class object final: single row data frame representing selected criterion minimum sample size developing new model criteria: data frame containing sample sizes based three criteria. Divergences sample sizes due number rounding sigma: single numeric representing tolerate rate adjusted \\(R^2\\) apparent \\(R^2\\) margin_error: divergence margin error specified Chi-square distribution's confidence level","code":""},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"pmsample objects created pmsamplesize can represent minimum sample size needed developing new model based current studies. pmsamplesize function adapts amount information based type model. certain parameters need pre-specifying calculation: number candidate predicators Q, usually obtained using fractional polynomial method addressed package. number levels response variable k, typically binary model k = 2, multinomial models k > 2. One argument k p, outcome proportions observation counts events, must specified. case missing k, defined length p. order p matters calculation: binary model, second value vector perceived 'outcome proportion' 'outcome events'. Pairwise C-statistics auc simulation. process requires estimates pairwise outcome proportions \\(\\phi_{k,r}\\) category k relative reference category r, prev. supplied, derived p.","code":""},{"path":[]},{"path":"https://chuckleong21.github.io/sample-criteria/reference/pmsamplesize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sample Criteria Extension for Multinomial Regression — pmsamplesize","text":"","code":"# when only C statistics is reported in a binary model set.seed(1234) pmsamplesize(Q = 30, k = 2, r2_nagelkerke = 0.15, auc = 0.81, prev = 0.77) #> Warning: Inadequate information to calculate sample size for criterion 2 #> NB: Assuming 0.05 acceptable difference in apparent & adjusted R-squared #> NB: Assuming 0.05 margin of error in estimation of intercept #> NB: Events per Predictor Parameter assumes prevalance 0.77  #>            sample_size shrinkage parameter CS_Rsq Max_Rsq Nag_Rsq   EPP #> Criteria 1        1130       0.9        30   0.21      NA    0.15 29.00 #> Criteria 3         273       0.9        30   0.21      NA    0.15  7.01 #> Final             1130       0.9        30   0.21      NA    0.15 29.00 #> Minimum sample size required for new model development based on user inputs = 1130, #>  with 870 events (assuming an outcome prevalence = 0.77) and an EPP = 29"},{"path":"https://chuckleong21.github.io/sample-criteria/reference/sample.criteria-package.html","id":null,"dir":"Reference","previous_headings":"","what":"sample.criteria: Criteria-based minimum sample size for multinomial logistic models — sample.criteria-package","title":"sample.criteria: Criteria-based minimum sample size for multinomial logistic models — sample.criteria-package","text":"package facilitate derive minimum sample size binary multinomial logistic models clinic studies based three criteria. 1) fixed shrinkage rate based 2) adjusted shrinkage rate tolerate rate models based 3) Overall risk restrainted margin error distribution.","code":""},{"path":[]},{"path":"https://chuckleong21.github.io/sample-criteria/reference/sample.criteria-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"sample.criteria: Criteria-based minimum sample size for multinomial logistic models — sample.criteria-package","text":"Maintainer: Jingwen Sun jingwen7841@gmail.com","code":""}]
